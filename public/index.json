[
{
	"uri": "//localhost:1313/2-build-sam-pipeline/2-1-create-git-repo/",
	"title": "Create Git repository",
	"tags": [],
	"description": "",
	"content": " Open your Gitlab dashboard.\nClick the Projects on the left menu. Choose Create a project option. At Create new project page, choose Create blank project option. At Create blank project page. Enter fcj-book-store-backend at Project name. Uncheck Initialize repository with a README. Click the Create project button. Configure SSH keys to communicate with Gitlab.\nFollow the documents in Notes to finish this step. Generate an SSH key pair.\nConfigure SSH to point to a different directory.\nRead more about Use SSH keys to communicate with GitLab.\nUpload the source code to fcj-book-store-backend Gitlab project.\nOpen your terminal and go to the root directory of fcj-book-store-sam-ws7 project that you downloaded before.\nRun the code below.\ngit init git remote add origin git@gitlab.com:fcj-ws/fcj-book-store-backend.git git add . git commit -m \u0026#34;Init project\u0026#34; git push --set-upstream origin master Back to fcj-book-store-backend Gitlab project. You could see the code has been uploaded. "
},
{
	"uri": "//localhost:1313/3-build-frontend-pipeline/3-1-create-git-repo/",
	"title": "Create Git repository ",
	"tags": [],
	"description": "",
	"content": " Open your Gitlab dashboard.\nClick the Projects on the left menu. Click the New project button. At Create new project page, choose Create blank project option. At Create blank project page. Enter fcj-book-store-frontend at Project name. Uncheck Initialize repository with a README. Click the Create project button. Configure SSH keys to communicate with Gitlab.\nFollow the documents in Notes to finish this step. Generate an SSH key pair.\nConfigure SSH to point to a different directory.\nRead more about Use SSH keys to communicate with GitLab.\nUpload the source code to fcj-book-store-frontend Gitlab project.\nGo to the root directory of FCJ-Serverless-Workshop project that you downloaded before.\nOpen src/config.js, change the value of APP_API_URL to the value of ApiUrl that you recorded in the Create SAM pipeline step, in this case is https://zr0i1ihy24.execute-api.us-east-1.amazonaws.com/staging\r. Next, create a new filed called buildspec.yml at the root directory of FCJ-Serverless-Workshop project as the following code.\nversion: 0.2 phases: install: runtime-versions: nodejs: 20.9.0 commands: - npm install -g yarn pre_build: commands: - echo Removing lock files... - rm -f package-lock.json - rm -f yarn.lock build: commands: - echo Build started on `date` - yarn install - yarn build artifacts: base-directory: build files: - \u0026#34;**/*\u0026#34; discard-paths: no Run the code below in your terminal at the root directory of FCJ-Serverless-Workshop project.\nrm -rf .git git init git remote add origin git@gitlab.com:fcj-ws/fcj-book-store-frontend.git git add . git commit -m \u0026#34;Init project\u0026#34; git push --set-upstream origin master Back to fcj-book-store-frontend Gitlab project. You could see the code has been uploaded. "
},
{
	"uri": "//localhost:1313/1-preparation/",
	"title": "Preparation",
	"tags": [],
	"description": "",
	"content": "Before we get to the main content of this workshop, we need to reset the web application.\nDownload the below source code.\nSource code\rfcj-book-store-sam-ws7.zip\r(48794 ko)\rDownload the FCJ-Serverless-Workshop code to your device.\nOpen a terminal on your computer in the folder where you want to save the source code.\nCopy the below command.\ngit clone https://github.com/AWS-First-Cloud-Journey/FCJ-Serverless-Workshop.git "
},
{
	"uri": "//localhost:1313/",
	"title": "Serverless - CI/CD with AWS CodePipeline",
	"tags": [],
	"description": "",
	"content": "Serverless - CI/CD with AWS CodePipeline Overview Continuous Integration, Continuous Delivery, Continuous Deployment (CI/CD) are software development practices for producing software in short cycles between merging source code changes and updating applications. The ultimate goal of these practices is to reduce the costs, time, and risks by delivering software in small pieces.\nIn workshop 7 of this series, we will know about CI/CD flow building so that every time you change and push source code on the git repository, it will automatically re-update our services and applications. There are many tools for us to build CI/CD, the most popular are Jenkins, Gitlab CI, Circle CI. In this workshop, we will use AWS\u0026rsquo;s CodePipeline.\nThe CI/CD Architecture for back-end: The developer create a git repository on Gitlab and pushes code of SAM project on it Every time the source code is updated, CodeBuild will automatically rebuild and prepare the CloudFormation template CloudFormation creates/updates serverless services The CI/CD Architecture for website front-end:\nThe developer creates a git repository on Gitlab and pushes the front-end code on it Every time the source code is updated, CodeBuild will automatically rebuild and then package the build folder Finally, the build folder is pushed to the S3 bucket with the static hosting website enabled CI/CD CI Continuous Integration is a software development practice in which developers regularly commit and push their local changes back to the shared repository (usually several times a day). By fetching and merging changes from other developers they mitigated the risk of complicated conflict resolution. Before each commit, developers can run unit tests locally on their source code as an additional check before integrating. A continuous integration service automatically builds and runs unit tests on the new source code changes to catch any errors immediately.\nCD Continuous Delivery is a software development practice that extends Continuous Integration in which source code changes are automatically prepared for deployment to a production instance. After a build, the build artifact with new changes is deployed to a staging instance where advanced (integration, acceptance, load, end-to-end, etc.) tests are run. If needed, the build artifact is automatically deployed to the production instance after manual approval.\nContinuous Deployment is a software development practice that extends Continuous Delivery in which source code changes are automatically deployed to a production instance. The difference between Continuous Delivery and Continuous Deployment is the presence of manual approval. With Continuous Delivery, deployment to production occurs automatically after manual approval. With Continuous Deployment, deployment to production occurs automatically without manual approval.\nContent Preparation Build SAM pipeline Build pipeline for frontend Test web operation Cleanup "
},
{
	"uri": "//localhost:1313/2-build-sam-pipeline/",
	"title": "Build SAM pipeline",
	"tags": [],
	"description": "",
	"content": "In this chapter you are going to learn how to automate the build, package and deploy commands by creating a continuous delivery pipeline using AWS Code Pipeline. We will be using SAM Pipelines to generate and a self-updating, multi-stage CI/CD pipeline.\nAWS SAM Pipelines SAM Pipelines works by creating a set of configuration and infrastructure files you use to create and manage your CI/CD pipeline.\nAs of this writing, SAM Pipelines can bootstrap CI/CD pipelines for the following providers:\nJenkins GitLab CI/CD GitHub Actions Bitbucket Pipelines AWS CodePipeline SAM Pipelines creates appropriate configuration files for your CI/CD provider of choice. For example, when using Gitlab CI/CD, SAM will synthesize a .gitlab-ci.yml file. This file defines your CI/CD pipeline using Gitlab CI/CD. In this workshop we will be using AWS CodePipeline. As you will soon see, SAM creates multiple files, one of which is a CloudFormation template named codepipeline.yaml. This template defines multiple AWS resources that work together to deploy our serverless application automatically.\nContent Create Git repository Create SAM pipeline "
},
{
	"uri": "//localhost:1313/3-build-frontend-pipeline/3-2-create-codepipeline/",
	"title": "Create pipeline ",
	"tags": [],
	"description": "",
	"content": "Create the pipeline Open AWS CodePipeline console.\nClick Pipelines on the left menu. Click Create pipeline button. At Step 1: Choose creation option page.\nChoose Build custom pipeline at Creation options. Then click Next button. At Step 2: Choose pipeline settings page.\nEnter fcjBookStoreFEPipeline at Pipeline name. Choose Queued at Execution mode. Choose New service role at Service role. Enter AWSCodePipelineServiceRole-us-east-1-fcjBookStoreFEPipeline at Role name. Click the Next button. At Step 3: Add source stage page.\nChoose Gitlab at Source provider. Choose fcjBookStoreGitlabConnection at Connection. Scroll down, enter fcj-ws/fcj-book-store-frontend at Repository name. Enter master at Default branch. Click the Next button. At Step 4: Add build stage page.\nChoose Other build providers at Build provider. Choose the AWS CodeBuild. Enter fcjBookStoreBuildProject at Project name. Click the Next button. At Step 5: Add test stage page.\nClick the Skip test stage button. At Step 6: Add deploy stage page.\nChoose the Amazon S3 at Deploy provider. Choose BuildArtifact at Input artifacts. Enter fcj-book-shop-by-myself at Bucket. Check the Extract file before deploy. Leave as default and click the Next button. At Step 7: Review page.\nScroll down and click the Create pipeline button. Test the pipeline Open AWS CodePipeline console.\nClick Pipelines on the left menu. Check if the status of fcjBookStoreFEPipeline is Succeeded. Open Amazon S3 console.\nClick General purpose buckets on the left menu. Choose fcj-book-shop-by-myself bucket. At fcj-book-shop-by-myself page, scroll down and copy the Bucket website endpoint url. Enter the copied link in a new tab in your web browser. "
},
{
	"uri": "//localhost:1313/2-build-sam-pipeline/2-2-create-pipeline/",
	"title": "Create SAM pipeline",
	"tags": [],
	"description": "",
	"content": "Preparation In this step, we will create IAM roles for CodePipeline - Deploy stage and CodeBuild.\nWarning The role is configured with minimal security, suitable only for a workshop environment.\nCreate CodePipeline - Deploy stage role.\nOpen AWS IAM console, then click Roles on the left menu. Click Create role button. At Step 1: Select trusted entity page. Choose AWS service at Trusted entity type. Enter CloudFormation at Service or use case and choose CloudFormation at Use case. Then click Next button. At Step 2: Add permissions page. Enter AdministratorAccess at Search box. Choose AdministratorAccess policy. Then click Next button. At Step 3: Name, review, and create page. Enter fcjCodePipelineDeployStageRole at Role name. Scroll down and click Create role button. Create CodeBuild role.\nOpen AWS IAM console, then click Roles on the left menu. Click Create role button. At Step 1: Select trusted entity page. Choose AWS service at Trusted entity type. Enter CodeBuild at Service or use case and choose CodeBuild at Use case. Then click Next button. At Step 2: Add permissions page. Enter AdministratorAccess at Search box. Choose AdministratorAccess policy. Then click Next button. At Step 3: Name, review, and create page. Enter fcjCodeBuildRole at Role name. Scroll down and click Create role button. Create the pipeline Open AWS CodePipeline console.\nClick Pipelines on the left menu. Click Create pipeline button. At Step 1: Choose creation option page.\nChoose Build custom pipeline at Creation options. Then click Next button. At Step 2: Choose pipeline settings page.\nEnter fcjBookStorePipeline at Pipeline name. Choose Queued at Execution mode. Choose New service role at Service role. Enter AWSCodePipelineServiceRole-us-east-1-fcjBookStorePipeline at Role name. Click the Next button. At Step 3: Add source stage page.\nChoose Gitlab at Source provider. Click the Connect to Gitlab button. At Create a connection page at new browser tab is just opened. Enter fcjBookStoreGitlabConnection at Connection name. Click the Connect to Gitlab button. After successful login to Gitlab, click the Connect button. Check if the Gitlab connection is successful. Enter fcj-ws/fcj-book-store-backend at Repository name. Enter master at Default branch. Scroll down to the bottom and click the Next button. At Step 4: Add build stage page.\nChoose Other build providers at Build provider. Choose the AWS CodeBuild. Click the Create project button. At Create build project page at the new browser tab is just opened. Enter fcjBookStoreBuildProject at Project name. Scroll down, choose Ubuntu at Operating system. Choose Existing service role at Service role. Choose fcjCodeBuildRole at Role ARN. Scroll down to the bottom, choose Use a buildspec file at Build specifications. Click the Continue to CodePipeline button. Choose the fcjBookStoreBuildProject at Project name. Leave as default and click the Next button. At Step 5: Add test stage page.\nClick the Skip test stage button. At Step 6: Add deploy stage page.\nChoose the AWS CloudFormation at Deploy provider. Choose the BuildArtifact at Input artifacts. Choose the Create or update a stack at Action mode. Enter fcj-book-store at Stack name. Scroll down, choose BuildArtifact at Artifact name. Enter packaged.yaml at File name. Choose the CAPABILITY_IAM, CAPABILITY_NAMED_IAM and CAPABILITY_AUTO_EXPAND at Capabilities - optional. Choose the fcjCodePipelineDeployStageRole at Role name. Click the Next button. At Step 7: Review page.\nScroll down and click the Create pipeline button. Test the pipeline Open AWS CodePipeline console.\nClick Pipelines on the left menu. Choose fcjBookStorePipeline pipeline. At fcjBookStorePipeline page.\nScroll down to the bottom, click the View details button. At fcjBookStorePipeline - Deploy stage page.\nChoose the Output tab and record the ApiUrl. "
},
{
	"uri": "//localhost:1313/3-build-frontend-pipeline/",
	"title": "Build pipeline for front-end",
	"tags": [],
	"description": "",
	"content": "In this chapter, we will create a new pipeline with AWS CodePipeline by console for S3 Single Page Application. Using CodeCommit repository to saves source code, CodeBuild to build application and S3 to deploy application.\nContent Create Git repository Create pipeline "
},
{
	"uri": "//localhost:1313/4-test-operation/",
	"title": "Test web operation",
	"tags": [],
	"description": "",
	"content": "Preparation Open Amazon Cognito console.\nClick the User pools on the left menu. Choose the fcj-user-pool User pool name. At Overview: fcj-user-pool page.\nClick the App clients on the left menu. Choose the fcj-user-pool-client App client name. At App client: fcj-user-pool-client page.\nRecord the value of the Client ID and Client secret. Go to the root directory of the fcj-book-store-sam-ws7 project that you downloaded before.\nOpen the template.yml file at the root folder and change the value of cognitoClientID and cognitoClientSecret with your recorded value in the previous step.\ncognitoClientID: Type: String Default: 5fvkqik6cd87mqrfa7m3qg46j0 # Your Client ID cognitoClientSecret: Type: String Default: smz277rcfj11eal321ffbnh59kw # Your Client secret Open your terminal at the root directory of the fcj-book-store-sam-ws7 project and run the following code.\ngit add . git commit -m \u0026#34;Change the value of Client ID and Client secret\u0026#34; git push Open AWS CodePipeline console.\nClick Pipelines on the left menu. Check if the status of fcjBookStorePipeline is Succeeded. Test web operation You can download the image files here to add data to check the operation of the services\nImages\rPythonCoding.jpeg\r(1095 ko)\rAt the tab in your web browser from the last previous step, click Register button on the upper right corner of the screen. At FCJ Book Store - Register page.\nEnter information to register an account: email, password and re-validate password. Click the Register button. Open the email you register, then find the message from no-reply@verificationemail.com to get verify code. Back to Verify Email page.\nEnter the verify code at the Verify code. Click the Submit button. At the FCJ Book Store - Login page.\nEnter your account information: Email and Password to login. Click the Submit button. So we just registered and logged in successfully. Next, we will test the adding a new book function.\nClick the Create new book tab. Enter ID: 1. Enter book name: Python Coding. Enter author: Doan Minh Phung. Enter category: IT. Enter price: 5.6. Enter description: Guide to basic of Python in real projects. Click the Choose File and select PythonCoding.jpeg that downloaded. Click the Create button. Then click the OK button. Back to the Homepage, we can see A new book has been added to the database. We have completed the workshop, already know how to create the SAM pipeline and pipeline using the console. Next workshop we learn about debugging, monitoring AWS Lambda with AWS CloudWatch and AWS X-ray.\n"
},
{
	"uri": "//localhost:1313/5-cleanup/",
	"title": "Cleanup",
	"tags": [],
	"description": "",
	"content": "\rIt will take a bit time to finish the cleanup\nEmpty S3 bucket.\nOpen AWS S3 console. Select fcj-book-shop-by-myself. Click Empty. Enter permanently delete. Click Empty. Do the same for bucket starting with aws-sam-cli-managed-default-, book-image-resize-shop-by-myself and codepipeline-us-east-1-. Delete pipeline.\nOpen AWS CodePipeline console. Select fcjBookStoreFEPipeline pipeline. Click Delete pipeline. Enter delete. Click Delete. Do the same for fcjBookStorePipeline. Delete CodeBuild project.\nOpen AWS CodeBuild console. Select fcjBookStoreBuildProject Build project. Click Actions, then click Delete. Enter delete. Click Delete. Delete Connection between Gitlab and AWS.\nOpen AWS CodeBuild console. Click Settings on the left menu and click Connections in the dropdown. Select fcjBookStoreGitlabConnection. Click Delete. Enter delete. Click Delete. Delete CloudFormation stacks.\nExecute the below command to delete the AWS SAM application.\nsam delete --stack-name fcj-book-store sam delete --stack-name aws-sam-cli-managed-default If you have issues when deleting with command. Open AWS Cloudformation console. Then, delete all stacks related to this workshop.\nDelete codepipeline-us-east-1-\u0026hellip; bucket.\nOpen AWS S3 console. Select codepipeline-us-east-1-\u0026hellip;. Click Delete. Enter codepipeline-us-east-1-.... Click Delete bucket. Delete Git repository. Follow this documentation: Delete a Gitlab project.\n"
},
{
	"uri": "//localhost:1313/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]